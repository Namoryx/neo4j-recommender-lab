# Neo4j와 Cypher를 활용한 그래프 추천 시스템 학습 게임 설계 (KO)

한국어로 제공되는 Neo4j 기반 그래프 추천 시스템 학습 게임 설계안이다. 사용자는 Cypher를 직접 작성·실행하며 **개념 → 미션 → 자동 채점 → 즉시 피드백 → 다음 스테이지** 루프를 반복해 실력을 쌓는다.

## 개요 및 목표
- Neo4j와 Cypher 이해도 향상, 그래프 추천 시스템 구현 원리 습득.
- AuraDB 설정부터 추천/RAG 실습까지 단계별 챕터 구성.
- 퀘스트, 배지, 점수 등 게임화 요소로 몰입도와 동기 강화.

## 챕터 맵
1. **Neo4j AuraDB 설정 및 개발 환경 구축**
   - AuraDB 생성 튜토리얼(가상 시나리오 또는 샘플 DB 자동 연결).
   - Neo4j Browser/게임 에디터에서 접속 후 테스트 쿼리 실행.
   - 스키마 시각화로 노드/관계 타입 이해 (User, Product, VIEW/ADDED_TO_CART/PURCHASED 등).
   - 예제 미션: `MATCH (p:Product) RETURN count(p);`로 상품 수 확인.
2. **Cypher 기본 및 고급 문법**
   - MATCH/WHERE로 조건 조회, 관계 방향 탐색, 집계·정렬, MERGE/CREATE 업데이트 연습.
   - 한 홉/두 홉 탐색, 존재/부존재 조건, DISTINCT 집계 등 포함.
   - MERGE + ON CREATE/ON MATCH로 이벤트 누적 패턴 실습.
   - 배지 예시: "Cypher 정복자".
3. **그래프 기반 추천 시스템 구현**
   - View/Cart/Buy 이벤트에 가중치 부여(예: 1/5/10)해 협업 필터링 구현.
   - 인기 상품, 유사 사용자 기반, 아이템 연관, 장바구니 교차 판매, 하이브리드 점수 계산 미션 제공.
   - Cypher로 다중 홉 패턴 + 집계를 조합해 추천 후보 생성·정렬.
4. **프로젝트 기반 응용**
   - 영화: 배우/영화 그래프로 두 단계 연결 배우 추천(케빈 베이컨 게임 응용).
   - 뉴스: 기사-주제 그래프로 주제 유사 기사 추천 또는 사용자 클릭 기반 협업 필터링.
   - ETF: ETF-주식 그래프로 공통 보유 종목 많은 ETF 추천, 투자자 포트폴리오 기반 추천.
   - 엔딩: 총 점수·배지 요약, "그래프 추천 마스터" 칭호 부여.

## 게임 구조와 UX
- 좌측 패널: 스토리·미션 설명, 입력 파라미터, NPC 힌트.
- 중앙 패널: Cypher 에디터(실행 ▶)와 결과/피드백 테이블.
- 우측 패널: 그래프 시각화(쿼리 결과 subgraph), 진행도·배지 표시.
- 실패 시 정밀 진단 피드백 제공(예: "이미 본 아이템 제외 조건 누락", "ORDER BY score DESC 누락").

## 백엔드/채점 설계
- Front: React/Next.js + Monaco Editor (프로토타입은 정적 HTML/CSS/JS).
- Back: FastAPI(또는 Node)에서 Neo4j AuraDB에 안전하게 질의 실행·채점.
- 채점 원칙: 결과 기반 검증(정렬 무시 set 비교, 컬럼명/형식 규정, 허용 오차 설정), 쿼리 문자열 비교 금지.
- 레벨 정의 JSON/YAML에 시드 데이터, 허용된 쿼리 타입, 입력 파라미터, 채점 규칙 포함.

## 데이터셋/모델 가이드
- 합성 전자상거래 그래프: User–Product 간 VIEW/ADDED_TO_CART/PURCHASED 관계(ts/weight 속성 가능).
- 필요 시 Order 노드 도입해 동시 구매 패턴 단순화.
- 추천/RAG 확장을 위한 Category/Brand/Topic/Vector 등 추가 노드·인덱스 설계.

## 보상 및 진행
- 퀘스트 성공 시 점수·배지 지급(예: "DB Connected", "그래프 마스터").
- 리더보드/친구 경쟁은 선택 사항, 기본은 개인 기록·진척도 표시.
- 즉시 피드백 후 다음 레벨로 이동하는 루프로 학습 동기 유지.

## 구현 체크리스트
- [ ] AuraDB 무료 티어/샌드박스 연결 튜토리얼.
- [ ] Cypher 기본/고급 퍼즐 세트.
- [ ] 추천 알고리즘 미션(가중치, 후보 생성, 제외, 랭킹, 보스전).
- [ ] GraphRAG 확장: CSV→노드/관계 ETL, fulltext/vector index, Text2Cypher, 근거 포함 답안 검증.
- [ ] 자동 채점 API(결과 기반) + 시각화 연동.
